import openai
import os

# í™˜ê²½ ë³€ìˆ˜ì—ì„œ API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸° (ë˜ëŠ” ì§ì ‘ ë¬¸ìì—´ë¡œ ëŒ€ì…í•´ë„ ë¨)
API_KEY = os.getenv("SHUTTLE_API_KEY")

# OpenAI í˜¸í™˜ í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
client = openai.OpenAI(
    base_url="https://inference-webtrial-api.shuttle.sr-cloud.com/gauss2-37b-instruct/v1/",
    api_key="dummyvalue",  # ì‹¤ì œ ì¸ì¦ì€ ì•„ë˜ headersë¡œ ì²˜ë¦¬
    default_headers={
        "Authorization": f"Basic {API_KEY}",
        "Content-Type": "application/json",
    },
)

def ask_llm(question):
    # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì™€ ì‚¬ìš©ì ì§ˆë¬¸ êµ¬ì„±
    messages = [
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": question}
    ]

    # ëª¨ë¸ í˜¸ì¶œ
    response = client.chat.completions.create(
        model="gauss2-37b-instruct",
        messages=messages,
        temperature=0.7,
        max_tokens=512
    )

    return response.choices[0].message.content

# ì˜ˆì‹œ ì§ˆë¬¸
if __name__ == "__main__":
    question = input("ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”: ")
    answer = ask_llm(question)
    print("ğŸ’¡ ë‹µë³€:", answer)
