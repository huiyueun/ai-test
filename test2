import os
import requests
import json
import base64

# API Key ì„¤ì •
api_key = os.getenv("SHUTTLE_API_KEY")  # ë˜ëŠ” ì§ì ‘ ë¬¸ìì—´ ì‚½ì…

# ì¸ì½”ë”©: Base64 Basic Auth ë°©ì‹
headers = {
    "Authorization": f"Basic {api_key}",
    "Content-Type": "application/json",
}

# ëª¨ë¸ URL
url = "https://inference-webtrial-api.shuttle.sr-cloud.com/gauss2-2-37b-instruct/v1/chat/completions"

def ask_llm(prompt):
    payload = {
        "model": "gauss2.2-37b",
        "messages" : [
            {
                "role" : "user",
                "content" : "Write 3 sentences that start with SAMSUNG."
            }
        ],
        "temperature":0.3,
        "top_p" : 0.95
    }

    response = requests.post(url, headers=headers, data=json.dumps(payload))

    if response.status_code == 200:
        print("âŒError:", response.status_code, response.text)
        return None
        # result = response.json()
        # return result["choices"][0]["text"].strip()
    else:
        print("âŒ Error:", response.status_code, response.text)
        return None

if __name__ == "__main__":
    question = input("ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”: ")
    answer = ask_llm(question)
    print("ğŸ’¡ ë‹µë³€:", answer)


âŒ Error: 200 {"id":"chatcmpl-772957cf-90d0-4c97-a54c-51a10d83c2af","object":"chat.completion","created":1751873140,"model":"gauss2.2-37b","choices":[{"index":0,"message":{"role":"assistant","reasoning_content":null,"content":"SAMSUNG is a global leader in technology, innovation, and consumer electronics.  \nSAMSUNG continues to push boundaries with its cutting-edge products and solutions.  \nSAMSUNG is committed to enhancing people's lives through meaningful and sustainable advancements.","tool_calls":[]},"logprobs":null,"finish_reason":"stop","stop_reason":null}],"usage":{"prompt_tokens":40,"total_tokens":91,"completion_tokens":51,"prompt_tokens_details":null},"prompt_logprobs":null}

