import openai
import os

# 환경 변수에서 API 키 불러오기 (또는 직접 문자열로 대입해도 됨)
API_KEY = os.getenv("SHUTTLE_API_KEY")

# OpenAI 호환 클라이언트 설정
client = openai.OpenAI(
    base_url="https://inference-webtrial-api.shuttle.sr-cloud.com/gauss2-37b-instruct/v1/",
    api_key="dummyvalue",  # 실제 인증은 아래 headers로 처리
    default_headers={
        "Authorization": f"Basic {API_KEY}",
        "Content-Type": "application/json",
    },
)

def ask_llm(question):
    # 시스템 프롬프트와 사용자 질문 구성
    messages = [
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": question}
    ]

    # 모델 호출
    response = client.chat.completions.create(
        model="gauss2-37b-instruct",
        messages=messages,
        temperature=0.7,
        max_tokens=512
    )

    return response.choices[0].message.content

# 예시 질문
if __name__ == "__main__":
    question = input("질문을 입력하세요: ")
    answer = ask_llm(question)
    print("💡 답변:", answer)
