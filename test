#include <dali/public-api/math/vector3.h>
#include <dali/public-api/math/quaternion.h>

// 단위 방향 벡터 기준으로 LookAt Quaternion 계산
Dali::Quaternion LookAtQuaternion(const Dali::Vector3& from, const Dali::Vector3& to, const Dali::Vector3& up = Dali::Vector3::YAXIS)
{
  using namespace Dali;

  Vector3 forward = (to - from).Normalize();
  Vector3 right   = up.Cross(forward).Normalize();
  Vector3 newUp   = forward.Cross(right);

  // 회전 행렬 구성
  Matrix3 rotationMatrix(
    right.x,   right.y,   right.z,
    newUp.x,   newUp.y,   newUp.z,
    forward.x, forward.y, forward.z
  );

  return Quaternion(rotationMatrix);
}
